<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">


<polymer-element name="locations-service" attributes="posts">
  <template>
    
    <core-ajax id="ajax"
      auto
       url="http://demo.openmrs.org/openmrs/ws/rest/v1/location"
      
      handleAs="json"

      method = "GET"
      on-core-response="{{locationsLoaded}}"
     

      >
      
    </core-ajax>
    
   
   
  </template>
  <script>
 
  
  Polymer('locations-service', {
    username: 'username',
    password: 'password',
    headers: '{"X-Requested-With": "XMLHttpRequest"' + ', "Authorization": "Basic ' + btoa(this.username + ":" + this.password) + '"}',
    created: function() {
      this.posts = [];
    },
    locationsLoaded: function() {
      
      this.posts = this.$.ajax.response.slice(0);
    //username: 'username',
    //password: 'password',
    //headers: '{"X-Requested-With": "XMLHttpRequest"' + ', "Authorization": "Basic ' + btoa(this.username + ":" + this.password) + '"}',
     // this.$.ajax.headers = '{"X-Requested-With": "XMLHttpRequest"' + 
     //                     ', "Authorization": "Basic ' + btoa(this.username 
     //                     + ":" + this.password) + '"}';

    },
    
  });
  </script>
</polymer-element>

</polymer-element>
